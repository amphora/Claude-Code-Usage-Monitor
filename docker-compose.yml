services:
  claude-monitor:
    image: ghcr.io/amphora/claude-code-usage-monitor:latest
    container_name: claude-usage-monitor
    stdin_open: true
    tty: true
    # Mount the host's Claude Code data directory (contains JSONL files)
    volumes:
      - "${HOME}/.claude:/root/.claude:ro"
    environment:
      - HOME=/root
    # Default arguments - users can override with docker-compose run
    command: ["--plan", "pro"]
    # Example: docker-compose run claude-monitor --plan max5 --timezone US/Eastern
    # To build locally instead: docker-compose -f docker-compose.local.yml up